{{/* Weekly schedule partial */}}

{{ $daysGR := site.Data.translations.days }}
{{ $weekdays := slice "Monday" "Tuesday" "Wednesday" "Thursday" "Friday" "Saturday" "Sunday" }}

<section style="margin-bottom: 2rem;">
  <h2 style="font-size: 2rem; font-weight: 500; margin-bottom: 1.5rem; text-align: left;">
    <span style="vertical-align: middle;">ðŸŽ¤</span> shows
  </h2>
  <div style="display: flex; flex-wrap: wrap; gap: 2rem; justify-content: space-between;">
    {{ range $day := $weekdays }}
    <div style="flex: 1 1 45%; min-width: 340px; max-width: 48%; align-self: flex-start;">
    <a href="{{ "days/" | relURL  }}{{ lower $day }}" style="text-decoration: none;">
      <div style="background: #c00; color: #fff; font-weight: bold; font-size: 1.4rem; padding: 0.7rem 1.5rem; margin-bottom: 1rem; width: fit-content;">{{ index $daysGR $day }}</div>
    </a>

    {{ $shows := slice }}
    {{ range site.Data.radio_shows }}
        {{ $time := index .schedule $day }}
        {{ if $time }}
            {{ $start := index (split $time " - ") 0 }}
    
            {{ if eq $start "00:00" }}
                {{ $start = "24:00" }}
            {{ end }}
    
            {{ $shows = $shows | append (dict "show" . "start" $start) }}
        {{ end }}
    {{ end }}
    
    {{ $sorted := sort $shows "start" "asc" }}

    {{ if gt (len $sorted) 0 }}
    <div style="background: #e0e0e0; padding: 1rem; border-radius: 4px;">
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
        {{ range $sorted }}
        <a href="{{ "shows/" | relURL  }}{{ .show.id }}" style="text-decoration: none; color: #000">
        <div style="display: flex; align-items: center; min-width: 0;">
          <img src="{{ .show.image | relURL }}" alt="{{ .show.title }}" style="width: 60px; height: 60px; object-fit: cover; margin-right: 1rem;">
          <div style="min-width: 0;">
            <h6 style="
              font-size: clamp(0.8rem, 2vw, 1.1rem);
              margin: 0;
              max-width: 140px;
              overflow-wrap: break-word;
              word-break: break-word;
              white-space: normal;
            ">{{ .show.title }}</h6>
            <div style="color: #444;">{{ index .show.schedule $day}}</div>
          </div>
        </div>
        </a>
        {{ end }}
      </div>
    </div>
  {{ end }}
  </div>
  {{ end }}
</div>
</section>
